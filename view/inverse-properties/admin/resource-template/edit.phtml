<?php
$this->htmlElement('body')->appendAttribute('class', ' inverse-properties');
?>

<?php echo $this->pageTitle($this->translate('Properties'), 1, $this->translate('Inverse properties'), $resourceTemplate->getLabel()); ?>

<?php echo $this->form()->openTag($form); ?>
<?php echo $this->formElement($form->get('form_csrf')); ?>

<div id="page-actions">
    <a class="button" href="<?php echo $this->escapeHtml($this->url('admin/inverse-properties-resource-template', ['action' => 'browse'], true)); ?>"><?php echo $this->translate('Go to resource templates'); ?></a>
    <input type="submit" value="<?php echo $this->escapeHtml($this->translate('Submit')); ?>">
</div>

<table class="tablesaw batch-edit" data-tablesaw-mode="stack">
    <thead>
        <tr>
            <th><?php echo $this->translate('Property'); ?></th>
            <th><?php echo $this->translate('Property term'); ?></th>
            <th><?php echo $this->translate('Alternate label'); ?></th>
            <th><?php echo $this->translate('Inverse property'); ?></th>
        </tr>
    </thead>
    <tbody>
        <?php foreach ($resourceTemplate->getResourceTemplateProperties() as $resourceTemplateProperty): ?>
        <?php
        $property = $resourceTemplateProperty->getProperty();
        $inverseProperty = $inverseProperties[$resourceTemplateProperty->getId()] ?? null;
        ?>
        <tr>
            <td><?php echo $property->getLabel(); ?></td>
            <td><?php echo sprintf('%s:%s', $property->getVocabulary()->getPrefix(), $property->getLocalName()); ?></td>
            <td><?php echo $resourceTemplateProperty->getAlternateLabel(); ?></td>
            <td><?php echo $this->propertySelect([
                'name' => sprintf('inverse_property_ids[%s]', $resourceTemplateProperty->getId()),
                'options' => [
                    'empty_option' => ''
                ],
                'attributes' => [
                    'class' => 'chosen-select',
                    'data-placeholder' => 'Select propertyâ€¦', // @translate
                    'value' => $inverseProperty ? $inverseProperty->getId() : '',
                ],
            ]); ?></td>
        </tr>
        <?php endforeach; ?>
    </tbody>
</table>

<?php echo $this->form()->closeTag(); ?>
